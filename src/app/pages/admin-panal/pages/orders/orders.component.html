<div class="orders-page">

  <h1>Orders Management</h1>

  <div *ngIf="loading" class="loading">
    Loading orders...
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div class="table-wrapper" *ngIf="!loading && !error">

    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Order ID</th>
          <th>User</th>
          <th>Date</th>
          <th>Total</th>
          <th>Status</th>
          <th>Change Status</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let order of orders; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ order._id }}</td>
          <td>{{ order.user?.name || '-' }}</td>
          <td>{{ order.createdAt | date:'yyyy-MM-dd' }}</td>
          <td>${{ order.totalPrice }}</td>

          <td>
            <span class="status" [class]="order.orderStatus">
              {{ order.orderStatus }}
            </span>
          </td>

          <td>
            <select
              [value]="order.orderStatus"
              (change)="changeStatus(order._id, $any($event.target).value)"
            >
              <option value="pending">Pending</option>
              <option value="processing">Processing</option>
              <option value="shipped">Shipped</option>
              <option value="delivered">Delivered</option>
              <option value="cancelled">Cancelled</option>
            </select>
          </td>
        </tr>
      </tbody>

    </table>

  </div>

</div>
