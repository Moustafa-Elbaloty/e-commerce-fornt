<div class="profile-wrapper" *ngIf="profile">
  <div class="container">
    <div class="profile-grid">

      <!-- SIDE CARD -->
      <aside class="profile-side-card">
        <div class="main-avatar-wrapper">
          <img src="https://via.placeholder.com/130" alt="User" class="main-avatar">
          <div class="edit-avatar-btn"><i class="fas fa-camera"></i></div>
        </div>

        <h3>{{ profile.name }}</h3>
        <p>{{ profile.email }}</p>

        <div style="margin-bottom:20px;">
          <span class="badge">{{ profile.role }}</span>
          <span class="badge success" *ngIf="profile.isEmailVerified">
            Email Verified
          </span>

          <p style="font-size:12px;margin-top:8px;color:#888" *ngIf="profile.lastLogin">
            Last login: {{ profile.lastLogin | date:'medium' }}
          </p>
        </div>

        <div class="profile-nav">
          <a class="profile-nav-item active">
            <i class="fas fa-user"></i> Personal Info
          </a>

          <a class="profile-nav-item" routerLink="/change-password">
            <i class="fas fa-lock"></i> Change Password
          </a>

          <a class="profile-nav-item">
            <i class="fas fa-shopping-bag"></i> My Orders
          </a>

          <a class="profile-nav-item">
            <i class="fas fa-heart"></i> Wishlist
          </a>

          <a class="profile-nav-item" style="color: var(--danger);">
            <i class="fas fa-sign-out-alt"></i> Logout
          </a>
        </div>
      </aside>

      <!-- MAIN CARD -->
      <main class="profile-main-card">
        <h2>Account Settings</h2>

        <div class="info-row">
          <span class="badge success">Account Active</span>
          <span class="badge" *ngIf="profile.defaultAddress">
            Default Address Set
          </span>
        </div>

        <form>

          <div class="form-group">
            <label>Full Name</label>
            <input
              type="text"
              [(ngModel)]="profile.name"
              name="name"
            >
          </div>

          <div class="form-group">
            <label>Email Address</label>
            <input
              type="email"
              [value]="profile.email"
              disabled
            >
          </div>

          <div class="form-group">
            <label>Phone Number</label>
            <input
              type="tel"
              [(ngModel)]="profile.phone"
              name="phone"
            >
          </div>

          <div class="form-group" *ngIf="profile.defaultAddress">
            <label>Full Address</label>
            <input
              type="text"
              [(ngModel)]="profile.defaultAddress.street"
              name="address"
            >
          </div>

          <button type="submit" class="btn btn-primary">
            Save Changes
          </button>
        </form>
      </main>

    </div>
  </div>
</div>

<div *ngIf="loading">Loading...</div>
<div *ngIf="error">{{ error }}</div>
