<main class="shopping-cart-page">
  <div class="container">
    <h1 class="page-title">Shopping Cart</h1>

    <div class="cart-content-grid">

      <!-- ================= CART ITEMS ================= -->
      <div class="cart-details">
        <div class="cart-header">
          <h2>Your Cart</h2>
          <p>You have {{ totalItems }} items in your cart.</p>
        </div>

        <!-- Empty Cart -->
        <div *ngIf="!loading && cartItems.length === 0">
          <p>Your cart is empty.</p>
        </div>

        <!-- Cart Items -->
        <div class="cart-item" *ngFor="let item of cartItems">
          <div class="item-info">
            <div class="item-image">
              <img [src]="item.product.image" [alt]="item.product.name" />
            </div>

            <div class="item-details">
              <h4>{{ item.product.name }}</h4>
              <p>${{ item.product.price }}</p>
            </div>
          </div>

          <div class="item-actions">
            <div class="cart-qty-selector">
              <button class="cart-qty-btn" (click)="decrease(item)" [disabled]="item.quantity === 1">
                -
              </button>

              <input class="cart-qty-input" [value]="item.quantity" readonly />

              <button class="cart-qty-btn" (click)="increase(item)" [disabled]="item.outOfStock">
                +
              </button>
            </div>

            <span class="item-price-total">
              ${{ item.product.price * item.quantity | number:'1.2-2' }}
            </span>

            <i class="fas fa-times remove-btn" (click)="removeItem(item.product._id)"></i>
          </div>
        </div>
      </div>

      <!-- ================= SUMMARY ================= -->
      <div class="order-summary">
        <h2>Order Summary</h2>

        <div class="summary-row">
          <span>Subtotal</span>
          <span>${{ subtotal | number:'1.2-2' }}</span>
        </div>

        <div class="summary-row">
          <span>Shipping</span>
          <span>${{ shipping }}</span>
        </div>

        <div class="summary-row total">
          <span>Order Total</span>
          <span>${{ total | number:'1.2-2' }}</span>
        </div>

        <div class="checkout-btn-container">
          <a class="btn-checkout" routerLink="/checkout" *ngIf="cartItems.length > 0">
            Proceed to Checkout
          </a>
        </div>
      </div>

    </div>
  </div>
</main>