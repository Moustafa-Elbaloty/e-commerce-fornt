<div class="page">
  <div class="container" id="container" #container>

    <!-- LOGIN -->
    <div class="form-box login">
      <form (ngSubmit)="login()" #loginForm="ngForm" novalidate>
        <h1>Sign In</h1>

        <div class="social-icons">
          <a class="icon google" (click)="loginWithGoogle($event)">
            <i class="fa-brands fa-google-plus-g"></i>
          </a>
          <a class="icon facebook" (click)="loginWithFacebook($event)">
            <i class="fa-brands fa-facebook-f"></i>
          </a>
        </div>

        <span>or use your email and password</span>

        <!-- Email -->
        <div class="input-box">
          <input
            type="email"
            placeholder="Email"
            required
            email
            name="email"
            [(ngModel)]="loginData.email"
            #loginEmail="ngModel"
          />

          <small class="error"
            *ngIf="loginEmail.invalid && loginEmail.touched">
            <span *ngIf="loginEmail.errors?.['required']">
              Email is required
            </span>
            <span *ngIf="loginEmail.errors?.['email']">
              Invalid email format
            </span>
          </small>
        </div>

        <!-- Password -->
        <div class="input-box">
          <input
            type="password"
            placeholder="Password"
            required
            minlength="8"
            name="password"
            [(ngModel)]="loginData.password"
            #loginPassword="ngModel"
          />

          <small class="error"
            *ngIf="loginPassword.invalid && loginPassword.touched">
            <span *ngIf="loginPassword.errors?.['required']">
              Password is required
            </span>
            <span *ngIf="loginPassword.errors?.['minlength']">
              Minimum 8 characters
            </span>
          </small>
        </div>

        <div class="forgot-link">
          <a routerLink="/forgot-password">Forgot password?</a>
        </div>

        <button type="submit" class="btn" [disabled]="loginForm.invalid">
          Sign In
        </button>
      </form>
    </div>

    <!-- REGISTER -->
    <div class="form-box register">
      <form (ngSubmit)="register()" #registerForm="ngForm" novalidate>
        <h1>Create Account</h1>

        <div class="social-icons">
          <a class="icon google" (click)="loginWithGoogle($event)">
            <i class="fa-brands fa-google-plus-g"></i>
          </a>
          <a class="icon facebook" (click)="loginWithFacebook($event)">
            <i class="fa-brands fa-facebook-f"></i>
          </a>
        </div>

        <p>or use your email for registration</p>

        <!-- Name -->
        <div class="input-box">
          <input
            type="text"
            placeholder="Name"
            required
            minlength="3"
            name="name"
            [(ngModel)]="registerData.name"
            #regName="ngModel"
          />

          <small class="error"
            *ngIf="regName.invalid && regName.touched">
            Name must be at least 3 characters
          </small>
        </div>

        <!-- Email -->
        <div class="input-box">
          <input
            type="email"
            placeholder="Email"
            required
            email
            name="email"
            [(ngModel)]="registerData.email"
            #regEmail="ngModel"
          />

          <small class="error"
            *ngIf="regEmail.invalid && regEmail.touched">
            Invalid email address
          </small>
        </div>

        <!-- Phone -->
        <div class="input-box">
          <input
            type="tel"
            placeholder="Phone Number"
            required
            pattern="^01[0-2,5]{1}[0-9]{8}$"
            name="phone"
            [(ngModel)]="registerData.phone"
            #regPhone="ngModel"
          />

          <small class="error"
            *ngIf="regPhone.invalid && regPhone.touched">
            Invalid phone number
          </small>
        </div>

        <!-- Password -->
        <div class="input-box">
          <input
            type="password"
            placeholder="Password"
            required
            minlength="8"
            name="password"
            [(ngModel)]="registerData.password"
            #regPassword="ngModel"
          />

          <small class="error"
            *ngIf="regPassword.invalid && regPassword.touched">
            Weak password (min  8 characters)
          </small>
        </div>

        <!-- Vendor Checkbox -->
        <div class="input-box role-checkbox">
          <label class="checkbox-container">
            <input
              type="checkbox"
              name="isVendor"
              [(ngModel)]="registerData.isVendor"
            />
            <span class="checkmark"></span>
            Register as Vendor
          </label>
        </div>

        <!-- Vendor Extra Fields -->
        <div *ngIf="registerData.isVendor" class="vendor-box">

          <!-- Store Name -->
          <div class="input-box">
            <input
              type="text"
              placeholder="Store Name"
              [required]="registerData.isVendor"
              name="storeName"
              [(ngModel)]="registerData.storeName"
              #storeName="ngModel"
            />
            <i class='bx bxs-store'></i>

            <small class="error"
              *ngIf="storeName.invalid && storeName.touched">
              Store name is required
            </small>
          </div>

          <!-- ID Card -->
          <div class="input-box file-box">
            <label class="file-label">
              <i class="fas fa-id-card"></i>
              Upload ID Card
            </label>
            <input
              type="file"
              accept="image/*"
              (change)="onFileChange($event,'idCard')"
              required
            />
          </div>

          <!-- Commercial Register -->
          <div class="input-box file-box">
            <label class="file-label">
              <i class="fas fa-file-alt"></i>
              Upload Commercial Register
            </label>
            <input
              type="file"
              accept="image/*,.pdf"
              (change)="onFileChange($event,'commercialRegister')"
              required
            />
          </div>

        </div>

        <button type="submit" class="btn" [disabled]="registerForm.invalid">
          Sign Up
        </button>
      </form>
    </div>

    <!-- TOGGLE -->
    <div class="toggle-box">
      <div class="toggle-panel toggle-left">
        <h1>Welcome Back!</h1>
        <p>Enter your personal details to use all site features</p>
        <button class="btn register-btn" (click)="showRegister()">Register</button>
      </div>

      <div class="toggle-panel toggle-right">
        <h1>Hello, Friend!</h1>
        <p>Register with your personal details to use all site features</p>
        <button class="btn login-btn" (click)="showLogin()">Login</button>
      </div>
    </div>

  </div>
</div>
